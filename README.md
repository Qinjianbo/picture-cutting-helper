# 切图助手 (Image Slicer)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## 简介

切图助手是一款Chrome插件，可以帮助设计师和开发者快速将大图切割成多个小图片。

## 功能特点

- 支持三种切割模式：
  - 均匀切割：将图片均匀切割成 N×N 的小图片
  - 自定义尺寸：指定每个小图片的宽度和高度
  - 自动识别：根据图片透明区域自动检测切割位置（推荐使用PNG格式）
- 支持多种图片格式：PNG（推荐）、JPG、JPEG
- 支持预览切割效果
- 自动打包下载所有切割后的图片

## 使用说明

1. 点击浏览器右上角的插件图标
2. 点击或拖拽图片到上传区域
3. 选择切割方式：
   - 均匀切割：设置要切割的行数和列数
   - 自定义尺寸：设置每个小图片的宽度和高度
   - 自动识别：适用于带透明背景的PNG图片，自动检测切割位置
4. 点击"预览"查看切割效果
5. 确认无误后点击"开始切割"
6. 切割完成后会自动下载一个zip文件，包含所有切割后的图片

## 最佳实践

### 自动识别模式
- 使用PNG格式的图片
- 确保图片有透明背景
- 图片元素之间需要有透明间隔
- 建议先使用预览功能查看切割效果
- 支持手动调整切割线位置：
  - 预览后可以拖动粉色切割线调整位置
  - 鼠标悬停在切割线上会显示调整手柄
  - 拖动切割线时会实时更新预览效果
  - 调整完成后点击"开始切割"即可

### 自动识别的工作原理
1. 扫描图片的透明区域
2. 识别连续的透明像素形成的分割线
3. 自动计算出最优的切割位置
4. 生成初始切割方案
5. 允许用户手动微调切割线
6. 根据最终切割线位置进行切片

### 自动识别的使用建议
1. 准备图片时：
   - 使用透明背景的PNG格式
   - 确保图片元素之间有足够的透明间隔（建议至少2-3像素）
   - 避免元素之间有部分重叠
   - 保持透明区域的清晰和连续

2. 切割时：
   - 上传图片后先使用预览功能
   - 检查自动识别的切割线是否准确
   - 如需调整，可拖动切割线微调位置
   - 调整到满意后再进行切割

### 均匀切割模式
- 适用于规则的图片网格
- 所有小图尺寸相同的情况

### 自定义尺寸模式
- 适用于固定尺寸的切图需求
- 可以处理任意格式的图片

## 技术栈

- HTML5 Canvas
- JavaScript
- Chrome Extension API

## 开发说明

- popup.html: 插件弹出窗口的界面
- popup.js: 主要的切图逻辑实现
- manifest.json: 插件配置文件
- styles.css: 界面样式

## 项目结构

```
切图助手/
├── images/               # 插件图标
│   ├── icon16.png       # 16x16 像素图标
│   ├── icon48.png       # 48x48 像素图标
│   └── icon128.png      # 128x128 像素图标
├── lib/                 # 第三方库
│   └── jszip.min.js     # JSZip 库用于生成压缩包
├── manifest.json        # 插件配置文件
├── popup.html          # 插件弹出窗口的 HTML
├── popup.js            # 主要的切图逻辑实现
├── styles.css          # 界面样式表
└── README.md           # 项目说明文档
```

### 文件说明

- **manifest.json**: 定义插件的基本信息、权限和资源
  - 包含插件名称、版本、描述
  - 定义需要的权限（如下载、剪贴板）
  - 指定图标和弹出窗口

- **popup.html**: 插件的用户界面
  - 图片上传区域
  - 切割模式选择
  - 参数设置控件
  - 操作按钮

- **popup.js**: 核心功能实现
  - 图片处理逻辑
  - 自动识别算法
  - 切割线调整功能
  - 切片生成和下载

- **styles.css**: 界面样式定义
  - 布局和定位
  - 交互效果
  - 主题样式

- **lib/jszip.min.js**: 第三方压缩库
  - 用于将切割后的图片打包
  - 生成可下载的 zip 文件

- **images/**: 插件图标目录
  - 包含不同尺寸的图标
  - 用于插件在浏览器中的显示

## 安装指南

由于商店限制，目前需要通过开发者模式手动安装此扩展。

### 方法一：下载源码安装

1. 下载源码
   - 点击本页面右上角的 `Code` -> `Download ZIP`
   - 或使用 git 克隆仓库：`git clone [仓库地址]`
   - 解压下载的文件（如果是 ZIP）

2. 打开 Chrome 扩展页面
   - 在 Chrome 地址栏输入：`chrome://extensions/`
   - 或者通过 `菜单` -> `更多工具` -> `扩展程序` 进入

3. 开启开发者模式
   - 在扩展页面右上角找到 `开发者模式`
   - 打开开发者模式开关

4. 加载扩展
   - 点击左上角的 `加载已解压的扩展程序`
   - 选择解压后的文件夹
   - 确保选择的文件夹包含 manifest.json 文件

### 方法二：拖拽安装

1. 下载并解压源码（同上）

2. 打开 Chrome 扩展页面（同上）

3. 开启开发者模式（同上）

4. 直接将解压后的文件夹拖拽到扩展页面

### 安装后配置

1. 固定扩展
   - 点击 Chrome 工具栏的扩展图标（拼图形状）
   - 找到"切图助手"
   - 点击图钉图标将其固定在工具栏

2. 授予权限
   - 首次使用时会请求必要权限
   - 点击"允许"以授予权限

### 注意事项

- 使用开发者模式安装的扩展，Chrome 可能会提示"移除"，这是正常现象
- 重启浏览器后可能需要重新启用扩展
- 更新版本时需要先移除旧版本，再安装新版本
- 确保下载的源码完整，包含所有必需文件

### 文件完整性检查

安装前请确保包含以下文件：
```
切图助手/
├── manifest.json     # 扩展配置文件
├── popup.html       # 主界面
├── popup.js         # 功能实现
├── styles.css       # 样式表
└── lib/
    └── jszip.min.js # 压缩库
```

### 常见问题

1. 提示"无法加载已解压的扩展程序"
   - 检查文件完整性
   - 确认 manifest.json 格式正确
   - 尝试重启浏览器

2. 扩展图标显示但无法使用
   - 检查是否授予了必要权限
   - 刷新扩展页面
   - 重新安装扩展

3. 更新提示
   - 手动安装的扩展不会自动更新
   - 请定期检查本页面获取最新版本

如遇到其他问题，请提交 Issue 反馈。

## 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

### 第三方库许可证

- JSZip: MIT 许可证 (https://github.com/Stuk/jszip/blob/master/LICENSE.markdown)

